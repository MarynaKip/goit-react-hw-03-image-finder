{"version":3,"sources":["services/images-api.js","components/Searchbar/index.js","components/ImageGallery/index.js","components/ImageGalleryItem/index.js","components/Loader/index.js","components/Button/index.js","components/Modal/index.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["searchQuery","page","URL","axios","get","then","response","data","hits","Searchbar","state","query","handleSubmit","e","preventDefault","console","log","props","onSubmit","setState","handleChange","currentTarget","value","className","styles","this","SearchForm","type","SearchForm_button","SearchForm_button_label","SearchForm_input","autocomplete","autofocus","placeholder","onChange","Component","ImageGallery","children","ImageGalleryItem","id","src","imageURL","alt","onClick","modalURL","Spinner","color","height","width","timeout","Button","defaultProps","Modal","handleKeyDown","code","onClose","handleOverlayClick","target","window","addEventListener","removeEventListener","App","images","showModal","isLoading","error","modalImage","onChangeQuery","fetchImages","options","imagesApi","prevState","catch","finally","onLoadMore","list","listRef","current","scrollTo","top","scrollHeight","behavior","toggleModal","onOpenModal","largeURL","React","createRef","prevProps","length","scrollTop","ref","map","image","webformatURL","largeImageURL","Loader","ReactDOM","render","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.33a10598.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst fetchImages = ({ searchQuery = \"\", page = 1 }) => {\r\n  const KEY = \"20328481-fd22f6b33af33c123ae9427ab\";\r\n  const URL = `https://pixabay.com/api/?q=${searchQuery}&page=${page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`;\r\n\r\n  return axios.get(URL).then((response) => response.data.hits);\r\n};\r\n\r\nexport default { fetchImages };\r\n","import React, { Component } from \"react\";\r\n//import PropTypes from \"prop-types\";\r\nimport styles from \"./Searchbar.module.css\";\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    query: \"\",\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    console.log(this.state);\r\n    this.props.onSubmit(this.state.query);\r\n    this.setState({ query: \"\" });\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    this.setState({ query: e.currentTarget.value });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={styles.Searchbar} onSubmit={this.handleSubmit}>\r\n        <form className={styles.SearchForm}>\r\n          <button type=\"submit\" className={styles.SearchForm_button}>\r\n            <span className={styles.SearchForm_button_label}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={styles.SearchForm_input}\r\n            type=\"text\"\r\n            autocomplete=\"off\"\r\n            autofocus\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\n//Searchbar.propTypes = {};\r\n\r\nexport default Searchbar;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport \"./ImageGallery.scss\";\r\n\r\n// import styled from \"styled-components\";\r\n\r\nclass ImageGallery extends Component {\r\n  render() {\r\n    return <ul className=\"ImageGallery\">{this.props.children}</ul>;\r\n  }\r\n}\r\n\r\nImageGallery.propTypes = {\r\n  children: PropTypes.node,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React, { Component } from \"react\";\r\nimport \"./ImageGalleryItem.scss\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass ImageGalleryItem extends Component {\r\n  render() {\r\n    return (\r\n      <li className=\"ImageGalleryItem\" key={this.props.id} id={this.props.id}>\r\n        <img\r\n          src={this.props.imageURL}\r\n          alt={this.props.imageURL}\r\n          className=\"ImageGalleryItem-image\"\r\n          onClick={() => this.props.onClick(this.props.modalURL)}\r\n        />\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  imageURL: PropTypes.string.isRequired,\r\n  modalURL: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import Loader from \"react-loader-spinner\";\r\n//import PropTypes from \"prop-types\";\r\n\r\nconst Spinner = () => (\r\n  <Loader\r\n    type=\"Puff\"\r\n    color=\"#00BFFF\"\r\n    height={100}\r\n    width={100}\r\n    timeout={3000} //3 secs\r\n  />\r\n);\r\n\r\n//Loader.propTypes = {};\r\n\r\nexport default Spinner;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport \"./Button.scss\";\r\n\r\nclass Button extends Component {\r\n  static defaultProps = {};\r\n\r\n  static propTypes = {\r\n    onClick: PropTypes.func.isRequired,\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <button\r\n        className=\"Button\"\r\n        type=\"button\"\r\n        onClick={() => this.props.onClick()}\r\n        // onClick={this.props.onClick()}\r\n      >\r\n        Load more\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Button;\r\n","import \"./Modal.scss\";\r\nimport React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default class Modal extends Component {\r\n  static propTypes = {\r\n    onClose: PropTypes.func.isRequired,\r\n    modalURL: PropTypes.string.isRequired,\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleOverlayClick = (e) => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Overlay\" onClick={this.handleOverlayClick}>\r\n        <div className=\"Modal\">\r\n          <img src={this.props.modalURL} alt={this.props.modalURL} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\nimport imagesApi from \"./services/images-api\";\nimport \"./App.css\";\nimport Searchbar from \"./components/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery\";\nimport ImageGalleryItem from \"./components/ImageGalleryItem\";\nimport Loader from \"./components/Loader\";\nimport Button from \"./components/Button\";\nimport Modal from \"./components/Modal\";\n\n// axios.defaults.headers.common[\"Authorization\"] =\n//   \"Bearer 20328481-fd22f6b33af33c123ae9427ab\";\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.listRef = React.createRef();\n  }\n  static defaultProps = {};\n\n  static propTypes = {};\n\n  state = {\n    images: [],\n    showModal: false,\n    searchQuery: \"\",\n    page: 1,\n    isLoading: false,\n    error: null,\n    modalImage: \"\",\n  };\n\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    // Добавляются ли в список новые элементы?\n    // Запоминаем значение прокрутки, чтобы использовать его позже.\n    if (prevState.images.length < this.state.images.length) {\n      const list = this.listRef.current;\n      return list.scrollHeight - list.scrollTop;\n    }\n    return null;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchImages();\n    }\n\n    // if (snapshot !== null) {\n    //   const list = this.listRef.current;\n\n    //   //list.scrollTop = list.scrollHeight - snapshot;\n    //   window.scrollTo({\n    //     top: list.scrollHeight,\n\n    //     behavior: \"smooth\",\n    //   });\n    // }\n  }\n\n  onChangeQuery = (query) => {\n    this.setState({ searchQuery: query, page: 1, images: [], error: null });\n  };\n\n  fetchImages = () => {\n    const { searchQuery, page } = this.state;\n    const options = { searchQuery, page };\n\n    this.setState({ isLoading: true });\n\n    imagesApi\n      .fetchImages(options)\n      .then((hits) => {\n        this.setState((prevState) => ({\n          images: [...prevState.images, ...hits],\n          page: prevState.page + 1,\n        }));\n      })\n      .catch((error) => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  onLoadMore = () => {\n    this.fetchImages();\n    const list = this.listRef.current;\n\n    window.scrollTo({\n      top: list.scrollHeight,\n\n      behavior: \"smooth\",\n    });\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n\n  onOpenModal = (largeURL) => {\n    this.setState({ modalImage: largeURL });\n    this.toggleModal();\n  };\n\n  render() {\n    const { images, isLoading, error, showModal, modalImage } = this.state;\n    return (\n      <div className=\"App\">\n        {showModal && (\n          <Modal modalURL={modalImage} onClose={this.toggleModal} />\n        )}\n        {error && <p>Oops!</p>}\n        <Searchbar onSubmit={this.onChangeQuery} />\n        <div ref={this.listRef}>\n          {\n            <ImageGallery>\n              {images.map((image) => (\n                <ImageGalleryItem\n                  id={image.id}\n                  imageURL={image.webformatURL}\n                  modalURL={image.largeImageURL}\n                  onClick={this.onOpenModal}\n                />\n              ))}\n            </ImageGallery>\n          }\n        </div>\n\n        {isLoading && <Loader />}\n        {images.length > 0 && <Button onClick={this.onLoadMore} />}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1ks5o\",\"SearchForm\":\"Searchbar_SearchForm__2z-RK\",\"SearchForm_button\":\"Searchbar_SearchForm_button__3Oyra\",\"SearchForm_button_label\":\"Searchbar_SearchForm_button_label__2jOh5\",\"SearchForm_input\":\"Searchbar_SearchForm_input__P9gni\"};"],"sourceRoot":""}